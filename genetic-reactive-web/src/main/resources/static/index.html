<html lang="en">
<body>
<canvas id="container" height="500" width="500"></canvas>

<script>
    const c = document.getElementById("container");
    const ctx = c.getContext("2d");
    const evtSource = new EventSource("/fluxBoxes");
    evtSource.onmessage = function (event) {
        let packerResponse = JSON.parse(event.data);
        packerResponse.boxes.forEach(box => {
            ctx.beginPath();
            ctx.rect(box.x, box.y, box.width, box.depth)
            ctx.stroke();
        })
    }
    evtSource.onerror = e => {
        evtSource.close()
    };
</script>
</body>
</html>